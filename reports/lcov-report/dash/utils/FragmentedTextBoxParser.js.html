<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for dash\utils\FragmentedTextBoxParser.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../index.html">all files</a> / <a href="index.html">dash/utils/</a> FragmentedTextBoxParser.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">27.27% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>12/44</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">20% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>4/20</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">20% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>1/5</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">26.19% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>11/42</span>
      </div>
      <div class='fl pad1y'>
        <span class="strong">1 branch</span>
        <span class="quiet">Ignored</span>  &nbsp;&nbsp;&nbsp;&nbsp;
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/**
 * The copyright in this software is being made available under the BSD License,
 * included below. This software may be subject to other third party and contributor
 * rights, including patent rights, and no such rights are granted under this license.
 *
 * Copyright (c) 2013, Dash Industry Forum.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *  * Redistributions of source code must retain the above copyright notice, this
 *  list of conditions and the following disclaimer.
 *  * Redistributions in binary form must reproduce the above copyright notice,
 *  this list of conditions and the following disclaimer in the documentation and/or
 *  other materials provided with the distribution.
 *  * Neither the name of Dash Industry Forum nor the names of its
 *  contributors may be used to endorse or promote products derived from this software
 *  without specific prior written permission.
 *
 *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY
 *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
 *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 *  POSSIBILITY OF SUCH DAMAGE.
 */
&nbsp;
'use strict';
&nbsp;
Object.defineProperty(exports, '__esModule', {
    value: true
});
// istanbul ignore next
&nbsp;
function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? <span class="branch-0 cbranch-skip" title="branch not covered" >obj </span>: { 'default': obj }; }
&nbsp;
var _coreFactoryMaker = require('../../core/FactoryMaker');
&nbsp;
var _coreFactoryMaker2 = _interopRequireDefault(_coreFactoryMaker);
&nbsp;
<span class="fstat-no" title="function not covered" >function FragmentedTextBoxParser() {</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var instance = undefined,</span>
        boxParser = undefined;
&nbsp;
<span class="fstat-no" title="function not covered" >    function setConfig(config) {</span>
<span class="cstat-no" title="statement not covered" >        if (!config) <span class="cstat-no" title="statement not covered" >return;</span></span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (config.boxParser) {</span>
<span class="cstat-no" title="statement not covered" >            boxParser = config.boxParser;</span>
        }
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function getSamplesInfo(ab) {</span>
<span class="cstat-no" title="statement not covered" >        var isoFile = boxParser.parse(ab);</span>
<span class="cstat-no" title="statement not covered" >        var tfhdBox = isoFile.getBox('tfhd');</span>
<span class="cstat-no" title="statement not covered" >        var tfdtBox = isoFile.getBox('tfdt');</span>
<span class="cstat-no" title="statement not covered" >        var trunBox = isoFile.getBox('trun');</span>
<span class="cstat-no" title="statement not covered" >        var moofBox = isoFile.getBox('moof');</span>
<span class="cstat-no" title="statement not covered" >        var mfhdBox = isoFile.getBox('mfhd');</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        var sampleDuration, sampleCompositionTimeOffset, sampleCount, sampleSize, sampleDts, sampleList, sample, i, dataOffset, sequenceNumber, totalDuration;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        sequenceNumber = mfhdBox.sequence_number;</span>
<span class="cstat-no" title="statement not covered" >        sampleCount = trunBox.sample_count;</span>
<span class="cstat-no" title="statement not covered" >        sampleDts = tfdtBox.baseMediaDecodeTime;</span>
<span class="cstat-no" title="statement not covered" >        dataOffset = (tfhdBox.base_data_offset || 0) + (trunBox.data_offset || 0);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        sampleList = [];</span>
<span class="cstat-no" title="statement not covered" >        for (i = 0; i &lt; sampleCount; i++) {</span>
<span class="cstat-no" title="statement not covered" >            sample = trunBox.samples[i];</span>
<span class="cstat-no" title="statement not covered" >            sampleDuration = sample.sample_duration !== undefined ? sample.sample_duration : tfhdBox.default_sample_duration;</span>
<span class="cstat-no" title="statement not covered" >            sampleSize = sample.sample_size !== undefined ? sample.sample_size : tfhdBox.default_sample_size;</span>
<span class="cstat-no" title="statement not covered" >            sampleCompositionTimeOffset = sample.sample_composition_time_offset !== undefined ? sample.sample_composition_time_offset : 0;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >            sampleList.push({ 'dts': sampleDts,</span>
                'cts': sampleDts + sampleCompositionTimeOffset,
                'duration': sampleDuration,
                'offset': moofBox.offset + dataOffset,
                'size': sampleSize });
<span class="cstat-no" title="statement not covered" >            dataOffset += sampleSize;</span>
<span class="cstat-no" title="statement not covered" >            sampleDts += sampleDuration;</span>
        }
<span class="cstat-no" title="statement not covered" >        totalDuration = sampleDts - tfdtBox.baseMediaDecodeTime;</span>
<span class="cstat-no" title="statement not covered" >        return { sampleList: sampleList, sequenceNumber: sequenceNumber, totalDuration: totalDuration };</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function getMediaTimescaleFromMoov(ab) {</span>
<span class="cstat-no" title="statement not covered" >        var isoFile = boxParser.parse(ab);</span>
<span class="cstat-no" title="statement not covered" >        var mdhdBox = isoFile.getBox('mdhd');</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        return mdhdBox ? mdhdBox.timescale : NaN;</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    instance = {</span>
        getSamplesInfo: getSamplesInfo,
        getMediaTimescaleFromMoov: getMediaTimescaleFromMoov,
        setConfig: setConfig
    };
&nbsp;
<span class="cstat-no" title="statement not covered" >    return instance;</span>
}
&nbsp;
FragmentedTextBoxParser.__dashjs_factory_name = 'FragmentedTextBoxParser';
exports['default'] = _coreFactoryMaker2['default'].getSingletonFactory(FragmentedTextBoxParser);
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6L0FwYWNoZTI0L2h0ZG9jcy9NeURhc2gvc3JjL2Rhc2gvdXRpbHMvRnJhZ21lbnRlZFRleHRCb3hQYXJzZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztnQ0ErQnlCLHlCQUF5Qjs7OztBQUVsRCxTQUFTLHVCQUF1QixHQUFHOztBQUUvQixRQUFJLFFBQVEsWUFBQTtRQUNSLFNBQVMsWUFBQSxDQUFDOztBQUVkLGFBQVMsU0FBUyxDQUFDLE1BQU0sRUFBRTtBQUN2QixZQUFJLENBQUMsTUFBTSxFQUFFLE9BQU87O0FBRXBCLFlBQUksTUFBTSxDQUFDLFNBQVMsRUFBRTtBQUNsQixxQkFBUyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUM7U0FDaEM7S0FDSjs7QUFFRCxhQUFTLGNBQWMsQ0FBQyxFQUFFLEVBQUU7QUFDeEIsWUFBSSxPQUFPLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUNsQyxZQUFJLE9BQU8sR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ3JDLFlBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDckMsWUFBSSxPQUFPLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUNyQyxZQUFJLE9BQU8sR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ3JDLFlBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7O0FBRXJDLFlBQUksY0FBYyxFQUNkLDJCQUEyQixFQUMzQixXQUFXLEVBQ1gsVUFBVSxFQUNWLFNBQVMsRUFDVCxVQUFVLEVBQ1YsTUFBTSxFQUNOLENBQUMsRUFDRCxVQUFVLEVBQ1YsY0FBYyxFQUNkLGFBQWEsQ0FBQzs7QUFFbEIsc0JBQWMsR0FBRyxPQUFPLENBQUMsZUFBZSxDQUFDO0FBQ3pDLG1CQUFXLEdBQUcsT0FBTyxDQUFDLFlBQVksQ0FBQztBQUNuQyxpQkFBUyxHQUFHLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztBQUN4QyxrQkFBVSxHQUFHLENBQUMsT0FBTyxDQUFDLGdCQUFnQixJQUFJLENBQUMsQ0FBQSxJQUFLLE9BQU8sQ0FBQyxXQUFXLElBQUksQ0FBQyxDQUFBLEFBQUMsQ0FBQzs7QUFFMUUsa0JBQVUsR0FBRyxFQUFFLENBQUM7QUFDaEIsYUFBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxXQUFXLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDOUIsa0JBQU0sR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzVCLDBCQUFjLEdBQUcsQUFBQyxNQUFNLENBQUMsZUFBZSxLQUFLLFNBQVMsR0FBSSxNQUFNLENBQUMsZUFBZSxHQUFHLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQztBQUNuSCxzQkFBVSxHQUFHLEFBQUMsTUFBTSxDQUFDLFdBQVcsS0FBSyxTQUFTLEdBQUksTUFBTSxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUMsbUJBQW1CLENBQUM7QUFDbkcsdUNBQTJCLEdBQUcsQUFBQyxNQUFNLENBQUMsOEJBQThCLEtBQUssU0FBUyxHQUFJLE1BQU0sQ0FBQyw4QkFBOEIsR0FBRyxDQUFDLENBQUM7O0FBRWhJLHNCQUFVLENBQUMsSUFBSSxDQUFDLEVBQUMsS0FBSyxFQUFFLFNBQVM7QUFDN0IscUJBQUssRUFBRyxTQUFTLEdBQUcsMkJBQTJCLEFBQUM7QUFDaEQsMEJBQVUsRUFBRSxjQUFjO0FBQzFCLHdCQUFRLEVBQUUsT0FBTyxDQUFDLE1BQU0sR0FBRyxVQUFVO0FBQ3JDLHNCQUFNLEVBQUUsVUFBVSxFQUFDLENBQUMsQ0FBQztBQUN6QixzQkFBVSxJQUFJLFVBQVUsQ0FBQztBQUN6QixxQkFBUyxJQUFJLGNBQWMsQ0FBQztTQUMvQjtBQUNELHFCQUFhLEdBQUcsU0FBUyxHQUFHLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztBQUN4RCxlQUFPLEVBQUMsVUFBVSxFQUFFLFVBQVUsRUFBRSxjQUFjLEVBQUUsY0FBYyxFQUFFLGFBQWEsRUFBRSxhQUFhLEVBQUMsQ0FBQztLQUNqRzs7QUFFRCxhQUFTLHlCQUF5QixDQUFDLEVBQUUsRUFBRTtBQUNuQyxZQUFJLE9BQU8sR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ2xDLFlBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7O0FBRXJDLGVBQU8sT0FBTyxHQUFHLE9BQU8sQ0FBQyxTQUFTLEdBQUcsR0FBRyxDQUFDO0tBQzVDOztBQUVELFlBQVEsR0FBRztBQUNQLHNCQUFjLEVBQUUsY0FBYztBQUM5QixpQ0FBeUIsRUFBRSx5QkFBeUI7QUFDcEQsaUJBQVMsRUFBRSxTQUFTO0tBQ3ZCLENBQUM7O0FBRUYsV0FBTyxRQUFRLENBQUM7Q0FDbkI7O0FBRUQsdUJBQXVCLENBQUMscUJBQXFCLEdBQUcseUJBQXlCLENBQUM7cUJBQzNELDhCQUFhLG1CQUFtQixDQUFDLHVCQUF1QixDQUFDIiwiZmlsZSI6IkM6L0FwYWNoZTI0L2h0ZG9jcy9NeURhc2gvc3JjL2Rhc2gvdXRpbHMvRnJhZ21lbnRlZFRleHRCb3hQYXJzZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRoZSBjb3B5cmlnaHQgaW4gdGhpcyBzb2Z0d2FyZSBpcyBiZWluZyBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgQlNEIExpY2Vuc2UsXG4gKiBpbmNsdWRlZCBiZWxvdy4gVGhpcyBzb2Z0d2FyZSBtYXkgYmUgc3ViamVjdCB0byBvdGhlciB0aGlyZCBwYXJ0eSBhbmQgY29udHJpYnV0b3JcbiAqIHJpZ2h0cywgaW5jbHVkaW5nIHBhdGVudCByaWdodHMsIGFuZCBubyBzdWNoIHJpZ2h0cyBhcmUgZ3JhbnRlZCB1bmRlciB0aGlzIGxpY2Vuc2UuXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDEzLCBEYXNoIEluZHVzdHJ5IEZvcnVtLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXQgbW9kaWZpY2F0aW9uLFxuICogYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuICogICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzXG4gKiAgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4gKiAgKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsXG4gKiAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUgZG9jdW1lbnRhdGlvbiBhbmQvb3JcbiAqICBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuICogICogTmVpdGhlciB0aGUgbmFtZSBvZiBEYXNoIEluZHVzdHJ5IEZvcnVtIG5vciB0aGUgbmFtZXMgb2YgaXRzXG4gKiAgY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb20gdGhpcyBzb2Z0d2FyZVxuICogIHdpdGhvdXQgc3BlY2lmaWMgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLlxuICpcbiAqICBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIEFTIElTIEFORCBBTllcbiAqICBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEXG4gKiAgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRSBESVNDTEFJTUVELlxuICogIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgSE9MREVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsXG4gKiAgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVFxuICogIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwgT1JcbiAqICBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSxcbiAqICBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpXG4gKiAgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEVcbiAqICBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbiAqL1xuXG5pbXBvcnQgRmFjdG9yeU1ha2VyIGZyb20gJy4uLy4uL2NvcmUvRmFjdG9yeU1ha2VyJztcblxuZnVuY3Rpb24gRnJhZ21lbnRlZFRleHRCb3hQYXJzZXIoKSB7XG5cbiAgICBsZXQgaW5zdGFuY2UsXG4gICAgICAgIGJveFBhcnNlcjtcblxuICAgIGZ1bmN0aW9uIHNldENvbmZpZyhjb25maWcpIHtcbiAgICAgICAgaWYgKCFjb25maWcpIHJldHVybjtcblxuICAgICAgICBpZiAoY29uZmlnLmJveFBhcnNlcikge1xuICAgICAgICAgICAgYm94UGFyc2VyID0gY29uZmlnLmJveFBhcnNlcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFNhbXBsZXNJbmZvKGFiKSB7XG4gICAgICAgIHZhciBpc29GaWxlID0gYm94UGFyc2VyLnBhcnNlKGFiKTtcbiAgICAgICAgdmFyIHRmaGRCb3ggPSBpc29GaWxlLmdldEJveCgndGZoZCcpO1xuICAgICAgICB2YXIgdGZkdEJveCA9IGlzb0ZpbGUuZ2V0Qm94KCd0ZmR0Jyk7XG4gICAgICAgIHZhciB0cnVuQm94ID0gaXNvRmlsZS5nZXRCb3goJ3RydW4nKTtcbiAgICAgICAgdmFyIG1vb2ZCb3ggPSBpc29GaWxlLmdldEJveCgnbW9vZicpO1xuICAgICAgICB2YXIgbWZoZEJveCA9IGlzb0ZpbGUuZ2V0Qm94KCdtZmhkJyk7XG5cbiAgICAgICAgdmFyIHNhbXBsZUR1cmF0aW9uLFxuICAgICAgICAgICAgc2FtcGxlQ29tcG9zaXRpb25UaW1lT2Zmc2V0LFxuICAgICAgICAgICAgc2FtcGxlQ291bnQsXG4gICAgICAgICAgICBzYW1wbGVTaXplLFxuICAgICAgICAgICAgc2FtcGxlRHRzLFxuICAgICAgICAgICAgc2FtcGxlTGlzdCxcbiAgICAgICAgICAgIHNhbXBsZSxcbiAgICAgICAgICAgIGksXG4gICAgICAgICAgICBkYXRhT2Zmc2V0LFxuICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXIsXG4gICAgICAgICAgICB0b3RhbER1cmF0aW9uO1xuXG4gICAgICAgIHNlcXVlbmNlTnVtYmVyID0gbWZoZEJveC5zZXF1ZW5jZV9udW1iZXI7XG4gICAgICAgIHNhbXBsZUNvdW50ID0gdHJ1bkJveC5zYW1wbGVfY291bnQ7XG4gICAgICAgIHNhbXBsZUR0cyA9IHRmZHRCb3guYmFzZU1lZGlhRGVjb2RlVGltZTtcbiAgICAgICAgZGF0YU9mZnNldCA9ICh0ZmhkQm94LmJhc2VfZGF0YV9vZmZzZXQgfHwgMCkgKyAodHJ1bkJveC5kYXRhX29mZnNldCB8fCAwKTtcblxuICAgICAgICBzYW1wbGVMaXN0ID0gW107XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBzYW1wbGVDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICBzYW1wbGUgPSB0cnVuQm94LnNhbXBsZXNbaV07XG4gICAgICAgICAgICBzYW1wbGVEdXJhdGlvbiA9IChzYW1wbGUuc2FtcGxlX2R1cmF0aW9uICE9PSB1bmRlZmluZWQpID8gc2FtcGxlLnNhbXBsZV9kdXJhdGlvbiA6IHRmaGRCb3guZGVmYXVsdF9zYW1wbGVfZHVyYXRpb247XG4gICAgICAgICAgICBzYW1wbGVTaXplID0gKHNhbXBsZS5zYW1wbGVfc2l6ZSAhPT0gdW5kZWZpbmVkKSA/IHNhbXBsZS5zYW1wbGVfc2l6ZSA6IHRmaGRCb3guZGVmYXVsdF9zYW1wbGVfc2l6ZTtcbiAgICAgICAgICAgIHNhbXBsZUNvbXBvc2l0aW9uVGltZU9mZnNldCA9IChzYW1wbGUuc2FtcGxlX2NvbXBvc2l0aW9uX3RpbWVfb2Zmc2V0ICE9PSB1bmRlZmluZWQpID8gc2FtcGxlLnNhbXBsZV9jb21wb3NpdGlvbl90aW1lX29mZnNldCA6IDA7XG5cbiAgICAgICAgICAgIHNhbXBsZUxpc3QucHVzaCh7J2R0cyc6IHNhbXBsZUR0cyxcbiAgICAgICAgICAgICAgICAnY3RzJzogKHNhbXBsZUR0cyArIHNhbXBsZUNvbXBvc2l0aW9uVGltZU9mZnNldCksXG4gICAgICAgICAgICAgICAgJ2R1cmF0aW9uJzogc2FtcGxlRHVyYXRpb24sXG4gICAgICAgICAgICAgICAgJ29mZnNldCc6IG1vb2ZCb3gub2Zmc2V0ICsgZGF0YU9mZnNldCxcbiAgICAgICAgICAgICAgICAnc2l6ZSc6IHNhbXBsZVNpemV9KTtcbiAgICAgICAgICAgIGRhdGFPZmZzZXQgKz0gc2FtcGxlU2l6ZTtcbiAgICAgICAgICAgIHNhbXBsZUR0cyArPSBzYW1wbGVEdXJhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICB0b3RhbER1cmF0aW9uID0gc2FtcGxlRHRzIC0gdGZkdEJveC5iYXNlTWVkaWFEZWNvZGVUaW1lO1xuICAgICAgICByZXR1cm4ge3NhbXBsZUxpc3Q6IHNhbXBsZUxpc3QsIHNlcXVlbmNlTnVtYmVyOiBzZXF1ZW5jZU51bWJlciwgdG90YWxEdXJhdGlvbjogdG90YWxEdXJhdGlvbn07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0TWVkaWFUaW1lc2NhbGVGcm9tTW9vdihhYikge1xuICAgICAgICB2YXIgaXNvRmlsZSA9IGJveFBhcnNlci5wYXJzZShhYik7XG4gICAgICAgIHZhciBtZGhkQm94ID0gaXNvRmlsZS5nZXRCb3goJ21kaGQnKTtcblxuICAgICAgICByZXR1cm4gbWRoZEJveCA/IG1kaGRCb3gudGltZXNjYWxlIDogTmFOO1xuICAgIH1cblxuICAgIGluc3RhbmNlID0ge1xuICAgICAgICBnZXRTYW1wbGVzSW5mbzogZ2V0U2FtcGxlc0luZm8sXG4gICAgICAgIGdldE1lZGlhVGltZXNjYWxlRnJvbU1vb3Y6IGdldE1lZGlhVGltZXNjYWxlRnJvbU1vb3YsXG4gICAgICAgIHNldENvbmZpZzogc2V0Q29uZmlnXG4gICAgfTtcblxuICAgIHJldHVybiBpbnN0YW5jZTtcbn1cblxuRnJhZ21lbnRlZFRleHRCb3hQYXJzZXIuX19kYXNoanNfZmFjdG9yeV9uYW1lID0gJ0ZyYWdtZW50ZWRUZXh0Qm94UGFyc2VyJztcbmV4cG9ydCBkZWZhdWx0IEZhY3RvcnlNYWtlci5nZXRTaW5nbGV0b25GYWN0b3J5KEZyYWdtZW50ZWRUZXh0Qm94UGFyc2VyKTsiXX0=</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Sun Jan 15 2017 21:03:55 GMT+0800 (中国标准时间)
</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
